<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  

  
  <title>JoshuaYingWhatEgr blogs</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="JoshuaYingWhatEgr blogs">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="JoshuaYingWhatEgr blogs">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="JoshuaYingWhatEgr">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="JoshuaYingWhatEgr blogs" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  
<link rel="stylesheet" href="/css/style.css">

<meta name="generator" content="Hexo 4.2.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">JoshuaYingWhatEgr blogs</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-2020-1-06-12月份的个人总结" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/01/06/2020-1-06-12%E6%9C%88%E4%BB%BD%E7%9A%84%E4%B8%AA%E4%BA%BA%E6%80%BB%E7%BB%93/" class="article-date">
  <time datetime="2020-01-05T16:00:00.000Z" itemprop="datePublished">2020-01-06</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/01/06/2020-1-06-12%E6%9C%88%E4%BB%BD%E7%9A%84%E4%B8%AA%E4%BA%BA%E6%80%BB%E7%BB%93/">12月份的个人总结</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="复习"><a href="#复习" class="headerlink" title="复习"></a>复习</h1><p>12月份主要是以复习Android系统源代码和常用控件的知识为主，但是做的事情比较杂,不成系统这里看一点那里看一点对看的东西印象都不是特别深刻。在这个月需要改进以一本书或者一个博客为主复习Android相关的知识点。</p>
<ul>
<li>主要复习TextView。（但是对TextPaint.setTextSize和TextView.setTextSize的区别还是没有弄清楚）</li>
<li>Activity的启动过程和AMS之间的关系.（目前希望通过控制Activity的生命周期进行干预达到对AMS比较深入了解的地步,不仅仅浮于表面—<a href="https://github.com/android-notes/Cockroach/blob/master/%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90.md）" target="_blank" rel="noopener">https://github.com/android-notes/Cockroach/blob/master/%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90.md）</a></li>
<li>AsyncTask源代码,软引用…,屏幕适配等.</li>
</ul>
<h1 id="练琴"><a href="#练琴" class="headerlink" title="练琴"></a>练琴</h1><p>目前主要在练习 jeus joy of man desiring。现在对前半部分按线较熟悉了没有那么生疏还是一个需要长期练习的过程自然而然就熟悉了。接下来就是能够将这首曲子练习到能够出视频演奏的水平。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2020/01/06/2020-1-06-12%E6%9C%88%E4%BB%BD%E7%9A%84%E4%B8%AA%E4%BA%BA%E6%80%BB%E7%BB%93/" data-id="ck8cw09ba002vpx9k84si8rjb" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E4%B8%AA%E4%BA%BA%E6%80%BB%E7%BB%93/" rel="tag">个人总结</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-2019-12-31-软引用和弱引用" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/12/31/2019-12-31-%E8%BD%AF%E5%BC%95%E7%94%A8%E5%92%8C%E5%BC%B1%E5%BC%95%E7%94%A8/" class="article-date">
  <time datetime="2019-12-30T16:00:00.000Z" itemprop="datePublished">2019-12-31</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/12/31/2019-12-31-%E8%BD%AF%E5%BC%95%E7%94%A8%E5%92%8C%E5%BC%B1%E5%BC%95%E7%94%A8/">软引用和弱引用</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Java开发的一个好处就是我们不用自己管理对象的内存,这样就避免了大量的内存溢出问题,而是交给了JVM去处理。但是有些时候我们的程序还是会报OOM的异常，针对这种情况我们使用软引用或者弱引用对某些对象具备一定的生命周期,从而在JVM内存已满或者执行垃圾回收的时候释放回收当前的对象。</p>
<h1 id="强引用"><a href="#强引用" class="headerlink" title="强引用"></a>强引用</h1><p>强引用是在代码中普遍存在的。例如:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Object object &#x3D; new Object();</span><br><span class="line">String str &#x3D; &quot;hello&quot;;</span><br></pre></td></tr></table></figure>
<p>这样的引用就称之为<strong>强引用</strong>，只要某个对象有强引用于之关联JVM必定不会回收这个对象,及时JVM内存已满OOM也不会回收这个对象.</p>
<h1 id="软引用"><a href="#软引用" class="headerlink" title="软引用"></a>软引用</h1><p>软引用一般是针对有用但不是必须的对象,比如当JVM虚拟机内存已满时是可以回收这个对象的。对于软引用关联着的对象只有JVM内存不足时才可以回收该对象.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SoftReference&lt;String&gt; sr = <span class="keyword">new</span> SoftReference&lt;String&gt;(<span class="keyword">new</span> String(<span class="string">"hello"</span>));</span><br><span class="line">        System.out.println(sr.get());</span><br></pre></td></tr></table></figure>

<h1 id="弱引用"><a href="#弱引用" class="headerlink" title="弱引用"></a>弱引用</h1><p>弱引用和软引用的作用是一样的,只不过它的回收机制不一样。当JVM执行GC操作的时候弱引用的对象就会被垃圾回收器回收。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"> WeakReference&lt;String&gt; sr = <span class="keyword">new</span> WeakReference&lt;String&gt;(<span class="keyword">new</span> String(<span class="string">"hello"</span>));</span><br><span class="line">         </span><br><span class="line">        System.out.println(sr.get());</span><br><span class="line">        System.gc();                <span class="comment">//通知JVM的gc进行垃圾回收</span></span><br><span class="line">        System.out.println(sr.get());</span><br><span class="line">        </span><br><span class="line"><span class="comment">//输出结果为:</span></span><br><span class="line">hello</span><br><span class="line"><span class="keyword">null</span></span><br></pre></td></tr></table></figure>
<p>从结果可以看出当执行了GC操作的时候弱引用的对象就会被回收。</p>
<p><strong>当一个对象既被强引用的同时又被软引用或者弱引用此时垃圾回收器是无法回收该对象的</strong></p>
<h1 id="实例："><a href="#实例：" class="headerlink" title="实例："></a>实例：</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">.....</span><br><span class="line"><span class="keyword">private</span> Map&lt;String, SoftReference&lt;Bitmap&gt;&gt; imageCache = <span class="keyword">new</span> HashMap&lt;String, SoftReference&lt;Bitmap&gt;&gt;();</span><br><span class="line">&lt;br&gt;....</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addBitmapToCache</span><span class="params">(String path)</span> </span>&#123;</span><br><span class="line"> </span><br><span class="line">        <span class="comment">// 强引用的Bitmap对象</span></span><br><span class="line"> </span><br><span class="line">        Bitmap bitmap = BitmapFactory.decodeFile(path);</span><br><span class="line"> </span><br><span class="line">        <span class="comment">// 软引用的Bitmap对象</span></span><br><span class="line"> </span><br><span class="line">        SoftReference&lt;Bitmap&gt; softBitmap = <span class="keyword">new</span> SoftReference&lt;Bitmap&gt;(bitmap);</span><br><span class="line"> </span><br><span class="line">        <span class="comment">// 添加该对象到Map中使其缓存</span></span><br><span class="line"> </span><br><span class="line">        imageCache.put(path, softBitmap);</span><br><span class="line"> </span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line"> <span class="function"><span class="keyword">public</span> Bitmap <span class="title">getBitmapByPath</span><span class="params">(String path)</span> </span>&#123;</span><br><span class="line"> </span><br><span class="line">        <span class="comment">// 从缓存中取软引用的Bitmap对象</span></span><br><span class="line"> </span><br><span class="line">        SoftReference&lt;Bitmap&gt; softBitmap = imageCache.get(path);</span><br><span class="line"> </span><br><span class="line">        <span class="comment">// 判断是否存在软引用</span></span><br><span class="line"> </span><br><span class="line">        <span class="keyword">if</span> (softBitmap == <span class="keyword">null</span>) &#123;</span><br><span class="line"> </span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line"> </span><br><span class="line">        &#125;</span><br><span class="line"> </span><br><span class="line">        <span class="comment">// 取出Bitmap对象，如果由于内存不足Bitmap被回收，将取得空</span></span><br><span class="line"> </span><br><span class="line">        Bitmap bitmap = softBitmap.get();</span><br><span class="line"> </span><br><span class="line">        <span class="keyword">return</span> bitmap;</span><br><span class="line"> </span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p>根据上面的结论,当程序执行到addBitmapToCache方法时如果此时JVM内存满了虚拟机也不会回收此对象。当执行完了这个方法时此时方法中创建的bitmap会被销毁,因为它是一个局部的变量函数执行完就没用了，将该对象赋值为软引用类型那么当JVM内存不足时它就会被回收,因此调用<br>getBitmapByPath时需要判断软引用是否为空。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2019/12/31/2019-12-31-%E8%BD%AF%E5%BC%95%E7%94%A8%E5%92%8C%E5%BC%B1%E5%BC%95%E7%94%A8/" data-id="ck8cw09b4002fpx9k1eyp2y52" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Java/" rel="tag">Java</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-2019-12-06-Android TextView源代码分析" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/12/06/2019-12-06-Android%20TextView%E6%BA%90%E4%BB%A3%E7%A0%81%E5%88%86%E6%9E%90/" class="article-date">
  <time datetime="2019-12-05T16:00:00.000Z" itemprop="datePublished">2019-12-06</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/12/06/2019-12-06-Android%20TextView%E6%BA%90%E4%BB%A3%E7%A0%81%E5%88%86%E6%9E%90/">Android TextView源代码分析</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="1-介绍"><a href="#1-介绍" class="headerlink" title="1.介绍"></a>1.介绍</h1><p>TextView作为Android开发日常中经常需要的显示文字的控件它提供了对文字的增删改查以及图文混排等功能。这篇文章主要是介绍TextView的绘制结构以及处理文字的流程。</p>
<p>TextView作为一个自定义控件必然也需要继承View并经过onMeasure,onLayout,onDraw这三个过程。</p>
<h1 id="onMeasure过程"><a href="#onMeasure过程" class="headerlink" title="onMeasure过程"></a>onMeasure过程</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line">   <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onMeasure</span><span class="params">(<span class="keyword">int</span> widthMeasureSpec, <span class="keyword">int</span> heightMeasureSpec)</span> </span>&#123;</span><br><span class="line">       <span class="comment">//首先接收到副容器传递过来的MeasureSpec</span></span><br><span class="line">       <span class="keyword">int</span> widthMode = MeasureSpec.getMode(widthMeasureSpec);</span><br><span class="line">       <span class="keyword">int</span> heightMode = MeasureSpec.getMode(heightMeasureSpec);</span><br><span class="line">       <span class="keyword">int</span> widthSize = MeasureSpec.getSize(widthMeasureSpec);</span><br><span class="line">       <span class="keyword">int</span> heightSize = MeasureSpec.getSize(heightMeasureSpec);</span><br><span class="line"></span><br><span class="line">       <span class="keyword">int</span> width;</span><br><span class="line">       <span class="keyword">int</span> height;</span><br><span class="line">       <span class="comment">//boring指的是布局所用的文本里不包含Span,所有的文本方向都是从左到右</span></span><br><span class="line">       <span class="comment">//并且只有一行就能完全显示文本</span></span><br><span class="line">       <span class="comment">//这里将TextView和Hint的boring初始化</span></span><br><span class="line">       BoringLayout.Metrics boring = UNKNOWN_BORING;</span><br><span class="line">       BoringLayout.Metrics hintBoring = UNKNOWN_BORING;</span><br><span class="line">       <span class="comment">//获得文字的排序方式</span></span><br><span class="line">       <span class="keyword">if</span> (mTextDir == <span class="keyword">null</span>) &#123;</span><br><span class="line">           mTextDir = getTextDirectionHeuristic();</span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line">       <span class="keyword">int</span> des = -<span class="number">1</span>;</span><br><span class="line">       <span class="keyword">boolean</span> fromexisting = <span class="keyword">false</span>;</span><br><span class="line">       <span class="comment">//如果宽度是精确模式,那副容器给的宽度就当作TextView的宽度</span></span><br><span class="line">       <span class="keyword">if</span> (widthMode == MeasureSpec.EXACTLY) &#123;</span><br><span class="line">           <span class="comment">// Parent has told us how big to be. So be it.</span></span><br><span class="line">           width = widthSize;</span><br><span class="line">       &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">           <span class="keyword">if</span> (mLayout != <span class="keyword">null</span> &amp;&amp; mEllipsize == <span class="keyword">null</span>) &#123;</span><br><span class="line">               <span class="comment">//首先计算一下期望值,如果行数大于1就返回-1</span></span><br><span class="line">               des = desired(mLayout);</span><br><span class="line">           &#125;</span><br><span class="line">           </span><br><span class="line">           <span class="comment">//这里是判断当文本的行数大于1行时,判断是否是boring   </span></span><br><span class="line">           <span class="keyword">if</span> (des &lt; <span class="number">0</span>) &#123;</span><br><span class="line">           <span class="comment">//如果文本中包含Span或者文本大于1行或者不是从左到右的排列顺序 </span></span><br><span class="line">           <span class="comment">//这个时候就返回null,否则不为空</span></span><br><span class="line">               boring = BoringLayout.isBoring(mTransformed, mTextPaint, mTextDir, mBoring);</span><br><span class="line">               <span class="keyword">if</span> (boring != <span class="keyword">null</span>) &#123;</span><br><span class="line">                   mBoring = boring;</span><br><span class="line">               &#125;</span><br><span class="line">           &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">               fromexisting = <span class="keyword">true</span>;</span><br><span class="line">           &#125;</span><br><span class="line">           <span class="comment">//这里再去判断文本是否是boring的</span></span><br><span class="line">           <span class="keyword">if</span> (boring == <span class="keyword">null</span> || boring == UNKNOWN_BORING) &#123;</span><br><span class="line">           <span class="comment">//如果文本是多行就直接把计算得出的des赋值给width</span></span><br><span class="line">               <span class="keyword">if</span> (des &lt; <span class="number">0</span>) &#123;</span><br><span class="line">                   des = (<span class="keyword">int</span>) Math.ceil(Layout.getDesiredWidth(mTransformed, <span class="number">0</span>,</span><br><span class="line">                           mTransformed.length(), mTextPaint, mTextDir));</span><br><span class="line">               &#125;</span><br><span class="line">               width = des;</span><br><span class="line">           &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">           <span class="comment">//如果boring是单行就把boring的宽赋值给width</span></span><br><span class="line">               width = boring.width;</span><br><span class="line">           &#125;</span><br><span class="line">           </span><br><span class="line">           <span class="comment">//这里是判断文本中是否有drawable</span></span><br><span class="line">           <span class="keyword">final</span> Drawables dr = mDrawables;</span><br><span class="line">           <span class="keyword">if</span> (dr != <span class="keyword">null</span>) &#123;</span><br><span class="line">              <span class="comment">//如果drawable不为空,通过比较width和dr.mDrawableWidthTop以及 dr.mDrawableWidthBottom的值</span></span><br><span class="line">              <span class="comment">//取最大的数值</span></span><br><span class="line">               width = Math.max(width, dr.mDrawableWidthTop);</span><br><span class="line">               width = Math.max(width, dr.mDrawableWidthBottom);</span><br><span class="line">           &#125;</span><br><span class="line">           <span class="comment">//当文本中有设置hint</span></span><br><span class="line">           <span class="keyword">if</span> (mHint != <span class="keyword">null</span>) &#123;</span><br><span class="line">               <span class="keyword">int</span> hintDes = -<span class="number">1</span>;</span><br><span class="line">               <span class="keyword">int</span> hintWidth;</span><br><span class="line"></span><br><span class="line">               <span class="keyword">if</span> (mHintLayout != <span class="keyword">null</span> &amp;&amp; mEllipsize == <span class="keyword">null</span>) &#123;</span><br><span class="line">                  <span class="comment">//获取期望值</span></span><br><span class="line">                   hintDes = desired(mHintLayout);</span><br><span class="line">               &#125;</span><br><span class="line">               <span class="comment">//如果des大于1行就判断hintboring是否是boring    </span></span><br><span class="line">               <span class="keyword">if</span> (hintDes &lt; <span class="number">0</span>) &#123;</span><br><span class="line">                   hintBoring = BoringLayout.isBoring(mHint, mTextPaint, mTextDir, mHintBoring);</span><br><span class="line">                   <span class="keyword">if</span> (hintBoring != <span class="keyword">null</span>) &#123;</span><br><span class="line">                       mHintBoring = hintBoring;</span><br><span class="line">                   &#125;</span><br><span class="line">               &#125;</span><br><span class="line">               <span class="comment">//如果hintBoring不是boring的</span></span><br><span class="line">               <span class="keyword">if</span> (hintBoring == <span class="keyword">null</span> || hintBoring == UNKNOWN_BORING) &#123;</span><br><span class="line">                   <span class="keyword">if</span> (hintDes &lt; <span class="number">0</span>) &#123;</span><br><span class="line">                       hintDes = (<span class="keyword">int</span>) Math.ceil(Layout.getDesiredWidth(mHint, <span class="number">0</span>, mHint.length(),</span><br><span class="line">                               mTextPaint, mTextDir));</span><br><span class="line">                   &#125;</span><br><span class="line">                   hintWidth = hintDes;</span><br><span class="line">               &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                   hintWidth = hintBoring.width;</span><br><span class="line">               &#125;</span><br><span class="line">               </span><br><span class="line">               <span class="comment">//最后将得到的hintWidth和width进行比较得到最终得到width</span></span><br><span class="line">               <span class="keyword">if</span> (hintWidth &gt; width) &#123;</span><br><span class="line">                   width = hintWidth;</span><br><span class="line">               &#125;</span><br><span class="line">           &#125;</span><br><span class="line">           <span class="comment">//这里将文本的padding边框加上</span></span><br><span class="line">           width += getCompoundPaddingLeft() + getCompoundPaddingRight();</span><br><span class="line"></span><br><span class="line">           <span class="keyword">if</span> (mMaxWidthMode == EMS) &#123;</span><br><span class="line">               width = Math.min(width, mMaxWidth * getLineHeight());</span><br><span class="line">           &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">               width = Math.min(width, mMaxWidth);</span><br><span class="line">           &#125;</span><br><span class="line"></span><br><span class="line">           <span class="keyword">if</span> (mMinWidthMode == EMS) &#123;</span><br><span class="line">               width = Math.max(width, mMinWidth * getLineHeight());</span><br><span class="line">           &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">               width = Math.max(width, mMinWidth);</span><br><span class="line">           &#125;</span><br><span class="line"></span><br><span class="line">           <span class="comment">// Check against our minimum width</span></span><br><span class="line">           width = Math.max(width, getSuggestedMinimumWidth());</span><br><span class="line"></span><br><span class="line">           <span class="keyword">if</span> (widthMode == MeasureSpec.AT_MOST) &#123;</span><br><span class="line">               width = Math.min(widthSize, width);</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="comment">//最后将上面计算的width减去padding边框就是我们文本显示width的大小</span></span><br><span class="line">       <span class="keyword">int</span> want = width - getCompoundPaddingLeft() - getCompoundPaddingRight();</span><br><span class="line">       <span class="keyword">int</span> unpaddedWidth = want;</span><br><span class="line">       </span><br><span class="line">       <span class="comment">//如果水平方向是scroll的,那么宽度就是无限大1024*1024    </span></span><br><span class="line">       <span class="keyword">if</span> (mHorizontallyScrolling) want = VERY_WIDE;</span><br><span class="line"></span><br><span class="line">       <span class="keyword">int</span> hintWant = want;</span><br><span class="line">       <span class="keyword">int</span> hintWidth = (mHintLayout == <span class="keyword">null</span>) ? hintWant : mHintLayout.getWidth();</span><br><span class="line">       <span class="comment">//如果文本的布局还是为空的那我们就创建一个layout</span></span><br><span class="line">       <span class="keyword">if</span> (mLayout == <span class="keyword">null</span>) &#123;</span><br><span class="line">           <span class="comment">//这个layout的作用主要是为了TextView的文字排版,折行以及文字绘制(layout最终在onDraw中调用layout.onDraw()方法完成绘制)</span></span><br><span class="line">           makeNewLayout(want, hintWant, boring, hintBoring,</span><br><span class="line">                         width - getCompoundPaddingLeft() - getCompoundPaddingRight(), <span class="keyword">false</span>);</span><br><span class="line">       &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">           <span class="keyword">final</span> <span class="keyword">boolean</span> layoutChanged = (mLayout.getWidth() != want) || (hintWidth != hintWant)</span><br><span class="line">                   || (mLayout.getEllipsizedWidth()</span><br><span class="line">                           != width - getCompoundPaddingLeft() - getCompoundPaddingRight());</span><br><span class="line"></span><br><span class="line">           <span class="keyword">final</span> <span class="keyword">boolean</span> widthChanged = (mHint == <span class="keyword">null</span>) &amp;&amp; (mEllipsize == <span class="keyword">null</span>)</span><br><span class="line">                   &amp;&amp; (want &gt; mLayout.getWidth())</span><br><span class="line">                   &amp;&amp; (mLayout <span class="keyword">instanceof</span> BoringLayout</span><br><span class="line">                           || (fromexisting &amp;&amp; des &gt;= <span class="number">0</span> &amp;&amp; des &lt;= want));</span><br><span class="line"></span><br><span class="line">           <span class="keyword">final</span> <span class="keyword">boolean</span> maximumChanged = (mMaxMode != mOldMaxMode) || (mMaximum != mOldMaximum);</span><br><span class="line"></span><br><span class="line">           <span class="keyword">if</span> (layoutChanged || maximumChanged) &#123;</span><br><span class="line">               <span class="keyword">if</span> (!maximumChanged &amp;&amp; widthChanged) &#123;</span><br><span class="line">                   mLayout.increaseWidthTo(want);</span><br><span class="line">               &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                   makeNewLayout(want, hintWant, boring, hintBoring,</span><br><span class="line">                           width - getCompoundPaddingLeft() - getCompoundPaddingRight(), <span class="keyword">false</span>);</span><br><span class="line">               &#125;</span><br><span class="line">           &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">               <span class="comment">// Nothing has changed</span></span><br><span class="line">           &#125;</span><br><span class="line">       &#125;</span><br><span class="line">       </span><br><span class="line">       <span class="comment">//然后计算height的高度,和宽度的流程大致相同</span></span><br><span class="line">       <span class="keyword">if</span> (heightMode == MeasureSpec.EXACTLY) &#123;</span><br><span class="line">           <span class="comment">// Parent has told us how big to be. So be it.</span></span><br><span class="line">           height = heightSize;</span><br><span class="line">           mDesiredHeightAtMeasure = -<span class="number">1</span>;</span><br><span class="line">       &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">           <span class="keyword">int</span> desired = getDesiredHeight();</span><br><span class="line"></span><br><span class="line">           height = desired;</span><br><span class="line">           mDesiredHeightAtMeasure = desired;</span><br><span class="line"></span><br><span class="line">           <span class="keyword">if</span> (heightMode == MeasureSpec.AT_MOST) &#123;</span><br><span class="line">               height = Math.min(desired, heightSize);</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line">       <span class="keyword">int</span> unpaddedHeight = height - getCompoundPaddingTop() - getCompoundPaddingBottom();</span><br><span class="line">       <span class="keyword">if</span> (mMaxMode == LINES &amp;&amp; mLayout.getLineCount() &gt; mMaximum) &#123;</span><br><span class="line">           unpaddedHeight = Math.min(unpaddedHeight, mLayout.getLineTop(mMaximum));</span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line">       <span class="comment">/*</span></span><br><span class="line"><span class="comment">        * We didn't let makeNewLayout() register to bring the cursor into view,</span></span><br><span class="line"><span class="comment">        * so do it here if there is any possibility that it is needed.</span></span><br><span class="line"><span class="comment">        */</span></span><br><span class="line">       <span class="keyword">if</span> (mMovement != <span class="keyword">null</span></span><br><span class="line">               || mLayout.getWidth() &gt; unpaddedWidth</span><br><span class="line">               || mLayout.getHeight() &gt; unpaddedHeight) &#123;</span><br><span class="line">           registerForPreDraw();</span><br><span class="line">       &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">           scrollTo(<span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line">       setMeasuredDimension(width, height);</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>
<p>makeNewLayout()方法:主要设置textview的布局样式(span,ellipsize)以及创建layout布局</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">makeNewLayout</span><span class="params">(<span class="keyword">int</span> wantWidth, <span class="keyword">int</span> hintWidth,</span></span></span><br><span class="line"><span class="function"><span class="params">                                BoringLayout.Metrics boring,</span></span></span><br><span class="line"><span class="function"><span class="params">                                BoringLayout.Metrics hintBoring,</span></span></span><br><span class="line"><span class="function"><span class="params">                                <span class="keyword">int</span> ellipsisWidth, <span class="keyword">boolean</span> bringIntoView)</span> </span>&#123;</span><br><span class="line">       stopMarquee();</span><br><span class="line"></span><br><span class="line">       <span class="comment">// Update "old" cached values</span></span><br><span class="line">       mOldMaximum = mMaximum;</span><br><span class="line">       mOldMaxMode = mMaxMode;</span><br><span class="line"></span><br><span class="line">       mHighlightPathBogus = <span class="keyword">true</span>;</span><br><span class="line"></span><br><span class="line">       <span class="keyword">if</span> (wantWidth &lt; <span class="number">0</span>) &#123;</span><br><span class="line">           wantWidth = <span class="number">0</span>;</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="keyword">if</span> (hintWidth &lt; <span class="number">0</span>) &#123;</span><br><span class="line">           hintWidth = <span class="number">0</span>;</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="comment">//文本对齐方式</span></span><br><span class="line">       Layout.Alignment alignment = getLayoutAlignment();</span><br><span class="line">       <span class="keyword">final</span> <span class="keyword">boolean</span> testDirChange = mSingleLine &amp;&amp; mLayout != <span class="keyword">null</span></span><br><span class="line">               &amp;&amp; (alignment == Layout.Alignment.ALIGN_NORMAL</span><br><span class="line">                       || alignment == Layout.Alignment.ALIGN_OPPOSITE);</span><br><span class="line">       <span class="keyword">int</span> oldDir = <span class="number">0</span>;</span><br><span class="line">       <span class="keyword">if</span> (testDirChange) oldDir = mLayout.getParagraphDirection(<span class="number">0</span>);</span><br><span class="line">       <span class="comment">//是否有省略号</span></span><br><span class="line">       <span class="keyword">boolean</span> shouldEllipsize = mEllipsize != <span class="keyword">null</span> &amp;&amp; getKeyListener() == <span class="keyword">null</span>;</span><br><span class="line">       <span class="comment">//省略号是否是正常模式的,还是非常规模式(eg:跑马灯)</span></span><br><span class="line">       <span class="keyword">final</span> <span class="keyword">boolean</span> switchEllipsize = mEllipsize == TruncateAt.MARQUEE</span><br><span class="line">               &amp;&amp; mMarqueeFadeMode != MARQUEE_FADE_NORMAL;</span><br><span class="line">       TruncateAt effectiveEllipsize = mEllipsize;</span><br><span class="line">       <span class="keyword">if</span> (mEllipsize == TruncateAt.MARQUEE</span><br><span class="line">               &amp;&amp; mMarqueeFadeMode == MARQUEE_FADE_SWITCH_SHOW_ELLIPSIS) &#123;</span><br><span class="line">           effectiveEllipsize = TruncateAt.END_SMALL;</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="comment">//文本排列方向</span></span><br><span class="line">       <span class="keyword">if</span> (mTextDir == <span class="keyword">null</span>) &#123;</span><br><span class="line">           mTextDir = getTextDirectionHeuristic();</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="comment">//创建一个singleLayout</span></span><br><span class="line">       mLayout = makeSingleLayout(wantWidth, boring, ellipsisWidth, alignment, shouldEllipsize,</span><br><span class="line">               effectiveEllipsize, effectiveEllipsize == mEllipsize);</span><br><span class="line">       <span class="comment">//如果是非常规的跑马灯需要创建一个mSavedMarqueeModeLayout,然后在启动跑 马灯的时候将mSavedMarqueeModeLayout赋值给layout。        </span></span><br><span class="line">       <span class="keyword">if</span> (switchEllipsize) &#123;</span><br><span class="line">           TruncateAt oppositeEllipsize = effectiveEllipsize == TruncateAt.MARQUEE</span><br><span class="line">                   ? TruncateAt.END : TruncateAt.MARQUEE;</span><br><span class="line">           mSavedMarqueeModeLayout = makeSingleLayout(wantWidth, boring, ellipsisWidth, alignment,</span><br><span class="line">                   shouldEllipsize, oppositeEllipsize, effectiveEllipsize != mEllipsize);</span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line">       shouldEllipsize = mEllipsize != <span class="keyword">null</span>;</span><br><span class="line">       mHintLayout = <span class="keyword">null</span>;</span><br><span class="line">       <span class="comment">//当设置了提示文字时,我们还要计算提示文字的layout</span></span><br><span class="line">       <span class="keyword">if</span> (mHint != <span class="keyword">null</span>) &#123;</span><br><span class="line">           <span class="keyword">if</span> (shouldEllipsize) hintWidth = wantWidth;</span><br><span class="line">           <span class="comment">//如果hint单行无缩紧并且无spann那么就把hintBoring赋值给mHintBoring</span></span><br><span class="line">           <span class="keyword">if</span> (hintBoring == UNKNOWN_BORING) &#123;</span><br><span class="line">               hintBoring = BoringLayout.isBoring(mHint, mTextPaint, mTextDir,</span><br><span class="line">                                                  mHintBoring);</span><br><span class="line">               <span class="keyword">if</span> (hintBoring != <span class="keyword">null</span>) &#123;</span><br><span class="line">                   mHintBoring = hintBoring;</span><br><span class="line">               &#125;</span><br><span class="line">           &#125;</span><br><span class="line"></span><br><span class="line">           <span class="keyword">if</span> (hintBoring != <span class="keyword">null</span>) &#123;</span><br><span class="line">               <span class="keyword">if</span> (hintBoring.width &lt;= hintWidth</span><br><span class="line">                       &amp;&amp; (!shouldEllipsize || hintBoring.width &lt;= ellipsisWidth)) &#123;</span><br><span class="line">                   <span class="keyword">if</span> (mSavedHintLayout != <span class="keyword">null</span>) &#123;</span><br><span class="line">                       mHintLayout = mSavedHintLayout.replaceOrMake(mHint, mTextPaint,</span><br><span class="line">                               hintWidth, alignment, mSpacingMult, mSpacingAdd,</span><br><span class="line">                               hintBoring, mIncludePad);</span><br><span class="line">                   &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                       mHintLayout = BoringLayout.make(mHint, mTextPaint,</span><br><span class="line">                               hintWidth, alignment, mSpacingMult, mSpacingAdd,</span><br><span class="line">                               hintBoring, mIncludePad);</span><br><span class="line">                   &#125;</span><br><span class="line"></span><br><span class="line">                   mSavedHintLayout = (BoringLayout) mHintLayout;</span><br><span class="line">               &#125; <span class="keyword">else</span> <span class="keyword">if</span> (shouldEllipsize &amp;&amp; hintBoring.width &lt;= hintWidth) &#123;</span><br><span class="line">                   <span class="keyword">if</span> (mSavedHintLayout != <span class="keyword">null</span>) &#123;</span><br><span class="line">                       mHintLayout = mSavedHintLayout.replaceOrMake(mHint, mTextPaint,</span><br><span class="line">                               hintWidth, alignment, mSpacingMult, mSpacingAdd,</span><br><span class="line">                               hintBoring, mIncludePad, mEllipsize,</span><br><span class="line">                               ellipsisWidth);</span><br><span class="line">                   &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                       mHintLayout = BoringLayout.make(mHint, mTextPaint,</span><br><span class="line">                               hintWidth, alignment, mSpacingMult, mSpacingAdd,</span><br><span class="line">                               hintBoring, mIncludePad, mEllipsize,</span><br><span class="line">                               ellipsisWidth);</span><br><span class="line">                   &#125;</span><br><span class="line">               &#125;</span><br><span class="line">           &#125;</span><br><span class="line">           <span class="comment">// <span class="doctag">TODO:</span> code duplication with makeSingleLayout()</span></span><br><span class="line">           <span class="comment">//如果不是boring的状态下,用StaticLayout来创建</span></span><br><span class="line">           <span class="keyword">if</span> (mHintLayout == <span class="keyword">null</span>) &#123;</span><br><span class="line">               StaticLayout.Builder builder = StaticLayout.Builder.obtain(mHint, <span class="number">0</span>,</span><br><span class="line">                       mHint.length(), mTextPaint, hintWidth)</span><br><span class="line">                       .setAlignment(alignment)</span><br><span class="line">                       .setTextDirection(mTextDir)</span><br><span class="line">                       .setLineSpacing(mSpacingAdd, mSpacingMult)</span><br><span class="line">                       .setIncludePad(mIncludePad)</span><br><span class="line">                       .setUseLineSpacingFromFallbacks(mUseFallbackLineSpacing)</span><br><span class="line">                       .setBreakStrategy(mBreakStrategy)</span><br><span class="line">                       .setHyphenationFrequency(mHyphenationFrequency)</span><br><span class="line">                       .setJustificationMode(mJustificationMode)</span><br><span class="line">                       .setMaxLines(mMaxMode == LINES ? mMaximum : Integer.MAX_VALUE);</span><br><span class="line">               <span class="keyword">if</span> (shouldEllipsize) &#123;</span><br><span class="line">                   builder.setEllipsize(mEllipsize)</span><br><span class="line">                           .setEllipsizedWidth(ellipsisWidth);</span><br><span class="line">               &#125;</span><br><span class="line">               mHintLayout = builder.build();</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line">       <span class="keyword">if</span> (bringIntoView || (testDirChange &amp;&amp; oldDir != mLayout.getParagraphDirection(<span class="number">0</span>))) &#123;</span><br><span class="line">           registerForPreDraw();</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="comment">//判断是否需要开始MARQUEE动画</span></span><br><span class="line">       <span class="keyword">if</span> (mEllipsize == TextUtils.TruncateAt.MARQUEE) &#123;</span><br><span class="line">           <span class="keyword">if</span> (!compressText(ellipsisWidth)) &#123;</span><br><span class="line">               <span class="keyword">final</span> <span class="keyword">int</span> height = mLayoutParams.height;</span><br><span class="line">               <span class="comment">// If the size of the view does not depend on the size of the text, try to</span></span><br><span class="line">               <span class="comment">// start the marquee immediately</span></span><br><span class="line">               <span class="keyword">if</span> (height != LayoutParams.WRAP_CONTENT &amp;&amp; height != LayoutParams.MATCH_PARENT) &#123;</span><br><span class="line">                   startMarquee();</span><br><span class="line">               &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                   <span class="comment">// Defer the start of the marquee until we know our width (see setFrame())</span></span><br><span class="line">                   mRestartMarquee = <span class="keyword">true</span>;</span><br><span class="line">               &#125;</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line">       <span class="comment">// CursorControllers need a non-null mLayout</span></span><br><span class="line">       <span class="keyword">if</span> (mEditor != <span class="keyword">null</span>) mEditor.prepareCursorControllers();</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>
<p>TextView使用boring类来创建相关布局,以节省不必要的文本测量以及折行,spann宽度和文本方向等的计算。</p>
<p>makeSingleLayout()方法:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">protected</span> Layout <span class="title">makeSingleLayout</span><span class="params">(<span class="keyword">int</span> wantWidth, BoringLayout.Metrics boring, <span class="keyword">int</span> ellipsisWidth,</span></span></span><br><span class="line"><span class="function"><span class="params">            Layout.Alignment alignment, <span class="keyword">boolean</span> shouldEllipsize, TruncateAt effectiveEllipsize,</span></span></span><br><span class="line"><span class="function"><span class="params">            <span class="keyword">boolean</span> useSaved)</span> </span>&#123;</span><br><span class="line">        Layout result = <span class="keyword">null</span>;</span><br><span class="line">        <span class="comment">//判断如果文本内部有spann则调用DynamicLayout类创建布局</span></span><br><span class="line">        <span class="keyword">if</span> (useDynamicLayout()) &#123;</span><br><span class="line">            <span class="keyword">final</span> DynamicLayout.Builder builder = DynamicLayout.Builder.obtain(mText, mTextPaint,</span><br><span class="line">                    wantWidth)</span><br><span class="line">                    .setDisplayText(mTransformed)</span><br><span class="line">                    .setAlignment(alignment)</span><br><span class="line">                    .setTextDirection(mTextDir)</span><br><span class="line">                    .setLineSpacing(mSpacingAdd, mSpacingMult)</span><br><span class="line">                    .setIncludePad(mIncludePad)</span><br><span class="line">                    .setUseLineSpacingFromFallbacks(mUseFallbackLineSpacing)</span><br><span class="line">                    .setBreakStrategy(mBreakStrategy)</span><br><span class="line">                    .setHyphenationFrequency(mHyphenationFrequency)</span><br><span class="line">                    .setJustificationMode(mJustificationMode)</span><br><span class="line">                    .setEllipsize(getKeyListener() == <span class="keyword">null</span> ? effectiveEllipsize : <span class="keyword">null</span>)</span><br><span class="line">                    .setEllipsizedWidth(ellipsisWidth);</span><br><span class="line">            result = builder.build();</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">//如果boring是未知状态则重新判断是不是boring</span></span><br><span class="line">            <span class="keyword">if</span> (boring == UNKNOWN_BORING) &#123;</span><br><span class="line">                boring = BoringLayout.isBoring(mTransformed, mTextPaint, mTextDir, mBoring);</span><br><span class="line">                <span class="keyword">if</span> (boring != <span class="keyword">null</span>) &#123;</span><br><span class="line">                    mBoring = boring;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//根据boring的属性来创建布局</span></span><br><span class="line">            <span class="keyword">if</span> (boring != <span class="keyword">null</span>) &#123;</span><br><span class="line">                <span class="keyword">if</span> (boring.width &lt;= wantWidth</span><br><span class="line">                        &amp;&amp; (effectiveEllipsize == <span class="keyword">null</span> || boring.width &lt;= ellipsisWidth)) &#123;</span><br><span class="line">                    <span class="keyword">if</span> (useSaved &amp;&amp; mSavedLayout != <span class="keyword">null</span>) &#123;</span><br><span class="line">                        result = mSavedLayout.replaceOrMake(mTransformed, mTextPaint,</span><br><span class="line">                                wantWidth, alignment, mSpacingMult, mSpacingAdd,</span><br><span class="line">                                boring, mIncludePad);</span><br><span class="line">                    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                        result = BoringLayout.make(mTransformed, mTextPaint,</span><br><span class="line">                                wantWidth, alignment, mSpacingMult, mSpacingAdd,</span><br><span class="line">                                boring, mIncludePad);</span><br><span class="line">                    &#125;</span><br><span class="line"></span><br><span class="line">                    <span class="keyword">if</span> (useSaved) &#123;</span><br><span class="line">                        mSavedLayout = (BoringLayout) result;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125; <span class="keyword">else</span> <span class="keyword">if</span> (shouldEllipsize &amp;&amp; boring.width &lt;= wantWidth) &#123;</span><br><span class="line">                    <span class="keyword">if</span> (useSaved &amp;&amp; mSavedLayout != <span class="keyword">null</span>) &#123;</span><br><span class="line">                        result = mSavedLayout.replaceOrMake(mTransformed, mTextPaint,</span><br><span class="line">                                wantWidth, alignment, mSpacingMult, mSpacingAdd,</span><br><span class="line">                                boring, mIncludePad, effectiveEllipsize,</span><br><span class="line">                                ellipsisWidth);</span><br><span class="line">                    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                        result = BoringLayout.make(mTransformed, mTextPaint,</span><br><span class="line">                                wantWidth, alignment, mSpacingMult, mSpacingAdd,</span><br><span class="line">                                boring, mIncludePad, effectiveEllipsize,</span><br><span class="line">                                ellipsisWidth);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//如果没有创建boringLayout则调用StaticLayout创建布局</span></span><br><span class="line">        <span class="keyword">if</span> (result == <span class="keyword">null</span>) &#123;</span><br><span class="line">            StaticLayout.Builder builder = StaticLayout.Builder.obtain(mTransformed,</span><br><span class="line">                    <span class="number">0</span>, mTransformed.length(), mTextPaint, wantWidth)</span><br><span class="line">                    .setAlignment(alignment)</span><br><span class="line">                    .setTextDirection(mTextDir)</span><br><span class="line">                    .setLineSpacing(mSpacingAdd, mSpacingMult)</span><br><span class="line">                    .setIncludePad(mIncludePad)</span><br><span class="line">                    .setUseLineSpacingFromFallbacks(mUseFallbackLineSpacing)</span><br><span class="line">                    .setBreakStrategy(mBreakStrategy)</span><br><span class="line">                    .setHyphenationFrequency(mHyphenationFrequency)</span><br><span class="line">                    .setJustificationMode(mJustificationMode)</span><br><span class="line">                    .setMaxLines(mMaxMode == LINES ? mMaximum : Integer.MAX_VALUE);</span><br><span class="line">            <span class="keyword">if</span> (shouldEllipsize) &#123;</span><br><span class="line">                builder.setEllipsize(effectiveEllipsize)</span><br><span class="line">                        .setEllipsizedWidth(ellipsisWidth);</span><br><span class="line">            &#125;</span><br><span class="line">            result = builder.build();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<h1 id="onLayout过程"><a href="#onLayout过程" class="headerlink" title="onLayout过程"></a>onLayout过程</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onLayout</span><span class="params">(<span class="keyword">boolean</span> changed, <span class="keyword">int</span> left, <span class="keyword">int</span> top, <span class="keyword">int</span> right, <span class="keyword">int</span> bottom)</span> </span>&#123;</span><br><span class="line">       <span class="keyword">super</span>.onLayout(changed, left, top, right, bottom);</span><br><span class="line">       <span class="keyword">if</span> (mDeferScroll &gt;= <span class="number">0</span>) &#123;</span><br><span class="line">           <span class="keyword">int</span> curs = mDeferScroll;</span><br><span class="line">           mDeferScroll = -<span class="number">1</span>;</span><br><span class="line">           bringPointIntoView(Math.min(curs, mText.length()));</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="comment">// Call auto-size after the width and height have been calculated.</span></span><br><span class="line">       autoSizeText();</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>
<p>调用bringPointIntoView设置textview在父布局中的位置。</p>
<h1 id="onDraw过程"><a href="#onDraw过程" class="headerlink" title="onDraw过程"></a>onDraw过程</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onDraw</span><span class="params">(Canvas canvas)</span> </span>&#123;</span><br><span class="line">        restartMarqueeIfNeeded();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Draw the background for this view</span></span><br><span class="line">        <span class="keyword">super</span>.onDraw(canvas);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">final</span> <span class="keyword">int</span> compoundPaddingLeft = getCompoundPaddingLeft();</span><br><span class="line">        <span class="keyword">final</span> <span class="keyword">int</span> compoundPaddingTop = getCompoundPaddingTop();</span><br><span class="line">        <span class="keyword">final</span> <span class="keyword">int</span> compoundPaddingRight = getCompoundPaddingRight();</span><br><span class="line">        <span class="keyword">final</span> <span class="keyword">int</span> compoundPaddingBottom = getCompoundPaddingBottom();</span><br><span class="line">        <span class="keyword">final</span> <span class="keyword">int</span> scrollX = mScrollX;</span><br><span class="line">        <span class="keyword">final</span> <span class="keyword">int</span> scrollY = mScrollY;</span><br><span class="line">        <span class="keyword">final</span> <span class="keyword">int</span> right = mRight;</span><br><span class="line">        <span class="keyword">final</span> <span class="keyword">int</span> left = mLeft;</span><br><span class="line">        <span class="keyword">final</span> <span class="keyword">int</span> bottom = mBottom;</span><br><span class="line">        <span class="keyword">final</span> <span class="keyword">int</span> top = mTop;</span><br><span class="line">        <span class="keyword">final</span> <span class="keyword">boolean</span> isLayoutRtl = isLayoutRtl();</span><br><span class="line">        <span class="keyword">final</span> <span class="keyword">int</span> offset = getHorizontalOffsetForDrawables();</span><br><span class="line">        <span class="keyword">final</span> <span class="keyword">int</span> leftOffset = isLayoutRtl ? <span class="number">0</span> : offset;</span><br><span class="line">        <span class="keyword">final</span> <span class="keyword">int</span> rightOffset = isLayoutRtl ? offset : <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">final</span> Drawables dr = mDrawables;</span><br><span class="line">        <span class="keyword">if</span> (dr != <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="comment">/*</span></span><br><span class="line"><span class="comment">             * Compound, not extended, because the icon is not clipped</span></span><br><span class="line"><span class="comment">             * if the text height is smaller.</span></span><br><span class="line"><span class="comment">             */</span></span><br><span class="line"></span><br><span class="line">            <span class="keyword">int</span> vspace = bottom - top - compoundPaddingBottom - compoundPaddingTop;</span><br><span class="line">            <span class="keyword">int</span> hspace = right - left - compoundPaddingRight - compoundPaddingLeft;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// IMPORTANT: The coordinates computed are also used in invalidateDrawable()</span></span><br><span class="line">            <span class="comment">// Make sure to update invalidateDrawable() when changing this code.</span></span><br><span class="line">            <span class="comment">//如果我们设置了drawable不为null绘制draweable</span></span><br><span class="line">            <span class="keyword">if</span> (dr.mShowing[Drawables.LEFT] != <span class="keyword">null</span>) &#123;</span><br><span class="line">                canvas.save();</span><br><span class="line">                canvas.translate(scrollX + mPaddingLeft + leftOffset,</span><br><span class="line">                        scrollY + compoundPaddingTop + (vspace - dr.mDrawableHeightLeft) / <span class="number">2</span>);</span><br><span class="line">                dr.mShowing[Drawables.LEFT].draw(canvas);</span><br><span class="line">                canvas.restore();</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// IMPORTANT: The coordinates computed are also used in invalidateDrawable()</span></span><br><span class="line">            <span class="comment">// Make sure to update invalidateDrawable() when changing this code.</span></span><br><span class="line">            <span class="keyword">if</span> (dr.mShowing[Drawables.RIGHT] != <span class="keyword">null</span>) &#123;</span><br><span class="line">                canvas.save();</span><br><span class="line">                canvas.translate(scrollX + right - left - mPaddingRight</span><br><span class="line">                        - dr.mDrawableSizeRight - rightOffset,</span><br><span class="line">                         scrollY + compoundPaddingTop + (vspace - dr.mDrawableHeightRight) / <span class="number">2</span>);</span><br><span class="line">                dr.mShowing[Drawables.RIGHT].draw(canvas);</span><br><span class="line">                canvas.restore();</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// IMPORTANT: The coordinates computed are also used in invalidateDrawable()</span></span><br><span class="line">            <span class="comment">// Make sure to update invalidateDrawable() when changing this code.</span></span><br><span class="line">            <span class="keyword">if</span> (dr.mShowing[Drawables.TOP] != <span class="keyword">null</span>) &#123;</span><br><span class="line">                canvas.save();</span><br><span class="line">                canvas.translate(scrollX + compoundPaddingLeft</span><br><span class="line">                        + (hspace - dr.mDrawableWidthTop) / <span class="number">2</span>, scrollY + mPaddingTop);</span><br><span class="line">                dr.mShowing[Drawables.TOP].draw(canvas);</span><br><span class="line">                canvas.restore();</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// IMPORTANT: The coordinates computed are also used in invalidateDrawable()</span></span><br><span class="line">            <span class="comment">// Make sure to update invalidateDrawable() when changing this code.</span></span><br><span class="line">            <span class="keyword">if</span> (dr.mShowing[Drawables.BOTTOM] != <span class="keyword">null</span>) &#123;</span><br><span class="line">                canvas.save();</span><br><span class="line">                canvas.translate(scrollX + compoundPaddingLeft</span><br><span class="line">                        + (hspace - dr.mDrawableWidthBottom) / <span class="number">2</span>,</span><br><span class="line">                         scrollY + bottom - top - mPaddingBottom - dr.mDrawableSizeBottom);</span><br><span class="line">                dr.mShowing[Drawables.BOTTOM].draw(canvas);</span><br><span class="line">                canvas.restore();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> color = mCurTextColor;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//当mLayout为空,创建layout这种是设置了textview但是没有设置文本的情况</span></span><br><span class="line">        <span class="keyword">if</span> (mLayout == <span class="keyword">null</span>) &#123;</span><br><span class="line">            assumeLayout();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        Layout layout = mLayout;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//有提示文字</span></span><br><span class="line">        <span class="keyword">if</span> (mHint != <span class="keyword">null</span> &amp;&amp; mText.length() == <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (mHintTextColor != <span class="keyword">null</span>) &#123;</span><br><span class="line">                color = mCurHintTextColor;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            layout = mHintLayout;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        mTextPaint.setColor(color);</span><br><span class="line">        mTextPaint.drawableState = getDrawableState();</span><br><span class="line"></span><br><span class="line">        canvas.save();</span><br><span class="line">        <span class="comment">/*  Would be faster if we didn't have to do this. Can we chop the</span></span><br><span class="line"><span class="comment">            (displayable) text so that we don't need to do this ever?</span></span><br><span class="line"><span class="comment">        */</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> extendedPaddingTop = getExtendedPaddingTop();</span><br><span class="line">        <span class="keyword">int</span> extendedPaddingBottom = getExtendedPaddingBottom();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">final</span> <span class="keyword">int</span> vspace = mBottom - mTop - compoundPaddingBottom - compoundPaddingTop;</span><br><span class="line">        <span class="keyword">final</span> <span class="keyword">int</span> maxScrollY = mLayout.getHeight() - vspace;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">float</span> clipLeft = compoundPaddingLeft + scrollX;</span><br><span class="line">        <span class="keyword">float</span> clipTop = (scrollY == <span class="number">0</span>) ? <span class="number">0</span> : extendedPaddingTop + scrollY;</span><br><span class="line">        <span class="keyword">float</span> clipRight = right - left - getCompoundPaddingRight() + scrollX;</span><br><span class="line">        <span class="keyword">float</span> clipBottom = bottom - top + scrollY</span><br><span class="line">                - ((scrollY == maxScrollY) ? <span class="number">0</span> : extendedPaddingBottom);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (mShadowRadius != <span class="number">0</span>) &#123;</span><br><span class="line">            clipLeft += Math.min(<span class="number">0</span>, mShadowDx - mShadowRadius);</span><br><span class="line">            clipRight += Math.max(<span class="number">0</span>, mShadowDx + mShadowRadius);</span><br><span class="line"></span><br><span class="line">            clipTop += Math.min(<span class="number">0</span>, mShadowDy - mShadowRadius);</span><br><span class="line">            clipBottom += Math.max(<span class="number">0</span>, mShadowDy + mShadowRadius);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        canvas.clipRect(clipLeft, clipTop, clipRight, clipBottom);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> voffsetText = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> voffsetCursor = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// translate in by our padding</span></span><br><span class="line">        <span class="comment">/* shortcircuit calling getVerticaOffset() */</span></span><br><span class="line">        <span class="keyword">if</span> ((mGravity &amp; Gravity.VERTICAL_GRAVITY_MASK) != Gravity.TOP) &#123;</span><br><span class="line">            voffsetText = getVerticalOffset(<span class="keyword">false</span>);</span><br><span class="line">            voffsetCursor = getVerticalOffset(<span class="keyword">true</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        canvas.translate(compoundPaddingLeft, extendedPaddingTop + voffsetText);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">final</span> <span class="keyword">int</span> layoutDirection = getLayoutDirection();</span><br><span class="line">        <span class="keyword">final</span> <span class="keyword">int</span> absoluteGravity = Gravity.getAbsoluteGravity(mGravity, layoutDirection);</span><br><span class="line">        <span class="keyword">if</span> (isMarqueeFadeEnabled()) &#123;</span><br><span class="line">            <span class="keyword">if</span> (!mSingleLine &amp;&amp; getLineCount() == <span class="number">1</span> &amp;&amp; canMarquee()</span><br><span class="line">                    &amp;&amp; (absoluteGravity &amp; Gravity.HORIZONTAL_GRAVITY_MASK) != Gravity.LEFT) &#123;</span><br><span class="line">                <span class="keyword">final</span> <span class="keyword">int</span> width = mRight - mLeft;</span><br><span class="line">                <span class="keyword">final</span> <span class="keyword">int</span> padding = getCompoundPaddingLeft() + getCompoundPaddingRight();</span><br><span class="line">                <span class="keyword">final</span> <span class="keyword">float</span> dx = mLayout.getLineRight(<span class="number">0</span>) - (width - padding);</span><br><span class="line">                canvas.translate(layout.getParagraphDirection(<span class="number">0</span>) * dx, <span class="number">0.0f</span>);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (mMarquee != <span class="keyword">null</span> &amp;&amp; mMarquee.isRunning()) &#123;</span><br><span class="line">                <span class="keyword">final</span> <span class="keyword">float</span> dx = -mMarquee.getScroll();</span><br><span class="line">                canvas.translate(layout.getParagraphDirection(<span class="number">0</span>) * dx, <span class="number">0.0f</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">final</span> <span class="keyword">int</span> cursorOffsetVertical = voffsetCursor - voffsetText;</span><br><span class="line"></span><br><span class="line">        Path highlight = getUpdatedHighlightPath();</span><br><span class="line">        <span class="comment">//edittext就绘制文字</span></span><br><span class="line">        <span class="keyword">if</span> (mEditor != <span class="keyword">null</span>) &#123;</span><br><span class="line">            mEditor.onDraw(canvas, layout, highlight, mHighlightPaint, cursorOffsetVertical);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">//edittext以外的布局</span></span><br><span class="line">            layout.draw(canvas, highlight, mHighlightPaint, cursorOffsetVertical);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (mMarquee != <span class="keyword">null</span> &amp;&amp; mMarquee.shouldDrawGhost()) &#123;</span><br><span class="line">            <span class="keyword">final</span> <span class="keyword">float</span> dx = mMarquee.getGhostOffset();</span><br><span class="line">            canvas.translate(layout.getParagraphDirection(<span class="number">0</span>) * dx, <span class="number">0.0f</span>);</span><br><span class="line">            layout.draw(canvas, highlight, mHighlightPaint, cursorOffsetVertical);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        canvas.restore();</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2019/12/06/2019-12-06-Android%20TextView%E6%BA%90%E4%BB%A3%E7%A0%81%E5%88%86%E6%9E%90/" data-id="ck8cw09b2002apx9k82r06w8c" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Android/" rel="tag">Android</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-2019-12-01-11月份的个人总结" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/12/01/2019-12-01-11%E6%9C%88%E4%BB%BD%E7%9A%84%E4%B8%AA%E4%BA%BA%E6%80%BB%E7%BB%93/" class="article-date">
  <time datetime="2019-11-30T16:00:00.000Z" itemprop="datePublished">2019-12-01</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/12/01/2019-12-01-11%E6%9C%88%E4%BB%BD%E7%9A%84%E4%B8%AA%E4%BA%BA%E6%80%BB%E7%BB%93/">11月份的个人总结</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="11月份的个人总结"><a href="#11月份的个人总结" class="headerlink" title="11月份的个人总结"></a>11月份的个人总结</h1><p>自己个人还是不能长期的专注正在做的事情总是在中间被打断。给自己分配的任务太多不能专注于当前一件主要的事情虽然自己对计算机不懂的还有很多很焦虑但是事情还是要一个一个的学心急理解得也不是很深刻,这些知识点每个都是一个大部头不是一两个月搞得定的还是需要长期的专注和大量的时间学习和实践。</p>
<p><strong>希望越来越好</strong></p>
<h2 id="关于计算机网络和编程"><a href="#关于计算机网络和编程" class="headerlink" title="关于计算机网络和编程"></a>关于计算机网络和编程</h2><p>11月份主要的事情还是遵从10月份的计划着手<strong>计算机网络</strong>的学习为主。通过订阅极客时间的趣谈网络专栏,Web Http协议视频专栏以及书学习基本的网络结构和一条请求发出去了会经过怎样的过程到达目的地服务器然后服务器再将数据返回回来。<br>专栏和书一个都没有完成,学习网络的过程中有大量的概念但是没有实战还是很模糊。觉得计算机网络是一个很大的知识点1个月的时间是不能完全掌握,后续还是需要长期的专注持续更进。<br><strong>计划:每1天或者2天学习一下网络知识,不能停啊</strong></p>
<h2 id="关于练琴"><a href="#关于练琴" class="headerlink" title="关于练琴"></a>关于练琴</h2><p>这个月每天回去都有练习吉他,只有在23号以后工作原因没有时间练习。Pierre Bensusan的练习曲还有最后一段没有完成。</p>
<h2 id="关于英语"><a href="#关于英语" class="headerlink" title="关于英语"></a>关于英语</h2><p>直接撂下了&lt;<code>~~</code>&gt;</p>
<h2 id="12月份的计划"><a href="#12月份的计划" class="headerlink" title="12月份的计划"></a>12月份的计划</h2><p>12月份最主要的事情:</p>
<ol>
<li>学习Android知识点和系统源码</li>
<li>练琴<br>次要事情:</li>
<li>计算机网络</li>
<li>Java知识Java虚拟机</li>
<li>学英语</li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2019/12/01/2019-12-01-11%E6%9C%88%E4%BB%BD%E7%9A%84%E4%B8%AA%E4%BA%BA%E6%80%BB%E7%BB%93/" data-id="ck8cw09b00028px9kczx11r6y" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E4%B8%AA%E4%BA%BA%E6%80%BB%E7%BB%93/" rel="tag">个人总结</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-2019-11-12-Http请求头Cache-Control机制详解" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/11/12/2019-11-12-Http%E8%AF%B7%E6%B1%82%E5%A4%B4Cache-Control%E6%9C%BA%E5%88%B6%E8%AF%A6%E8%A7%A3/" class="article-date">
  <time datetime="2019-11-11T16:00:00.000Z" itemprop="datePublished">2019-11-12</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/11/12/2019-11-12-Http%E8%AF%B7%E6%B1%82%E5%A4%B4Cache-Control%E6%9C%BA%E5%88%B6%E8%AF%A6%E8%A7%A3/">Http请求头Cache-Control机制详解</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>在Web开发中有些时候为了减轻服务器的压力或者提高用户的体验我们会对请求的资源进行一定的缓存以便不在从服务器获取相同的数据直接从缓存中获取。<br>客户端请求服务器以及服务器发送给客户端的数据都会包含一个请求头信息(headers)和一个请求体(body),客户端和浏览器要做的缓存控制就是在hearder头中通过Cache-Control关键字以它作为key,相应的信息作为value。</p>
<h1 id="Cache-Control-http1-1"><a href="#Cache-Control-http1-1" class="headerlink" title="Cache-Control(http1.1)"></a>Cache-Control(http1.1)</h1><p>缓存的key</p>
<p><img src="/img/in-post/%E8%AF%B7%E6%B1%82%E9%A6%96%E9%83%A8.jpg" alt=""></p>
<p><img src="/img/in-post/%E5%93%8D%E5%BA%94%E9%A6%96%E9%83%A8.jpg" alt=""></p>
<h2 id="no-cache"><a href="#no-cache" class="headerlink" title="no-cache"></a>no-cache</h2><p><strong>Cache-Control: no-cache</strong><br>客户端在请求头中设置no-cache这个字段请求服务器时表示缓存会将此请求发送给服务器(该请求会带有本地缓存相关的验证字段),服务器会根据这个字段验证请求中所描述的缓存是否过期，如果未过期返回304,则缓存才使用本地缓存。<strong>这个其实是一个对比缓存</strong></p>
<h2 id="only-if-cached"><a href="#only-if-cached" class="headerlink" title="only-if-cached"></a>only-if-cached</h2><p><strong>Cache-Control: only-if-cached(从英文名得出:如果有,仅仅使用缓存)</strong><br><strong>前提是这个缓存一定是可用的比如设置了max-age = xxx这个就说明过了xxx秒之后缓存不能用了此时客户端通过only-if-cached是获取不到缓存的数据的因为缓存已经不能用了。</strong><br>如果有匹配项(新的或旧的)，则从缓存中返回。<br>如果没有匹配，浏览器将返回一个错误(504)。</p>
<h2 id="max-age"><a href="#max-age" class="headerlink" title="max-age"></a>max-age</h2><p><strong>Cache-Control: max-age=XXX</strong><br>这个字段表示缓存在XXX时间内都是有效的,当超出了这个时间就从服务器重新请求数据。</p>
<h3 id="对于客户端来说"><a href="#对于客户端来说" class="headerlink" title="对于客户端来说:"></a>对于客户端来说:</h3><ul>
<li>当客户端的XXX时间比服务器端的时间长时,客户端就会获取到缓存的数据,当然前提是服务器端设置的XXX时间内缓存的数据没有过期<br>例如:服务区端设置的时间为max-age=100,客户端设置的时间为max-age=200.这个时候只要服务器端的时间没有过期那么客户端获取的数据就是缓存的数据。</li>
<li>当客户端设置的XXX时间比服务器端的时间少时,这个时候客户端的请求是在设置的时间之内就之间返回缓存的数据否则请求服务器获取.<br>例如:客户端设置的时间为max-age=5,服务器端设置的时间为max-age=10,这个时候当客户端在5s以内所有的请求获取的就是缓存数据,如果超过了5s即使缓存没有过期依然发送请求给服务器重新获取数据。</li>
</ul>
<h3 id="对于服务器端来说"><a href="#对于服务器端来说" class="headerlink" title="对于服务器端来说:"></a>对于服务器端来说:</h3><ul>
<li>当服务器端设置了max-age=XXX就表示过了XXX时间以后缓存失效需要重新请求数据。</li>
</ul>
<h2 id="no-store"><a href="#no-store" class="headerlink" title="no-store"></a>no-store</h2><p><strong>Cache-Control: no-store</strong><br>表示客户端不使用任何的缓存,每次请求都是直接从服务器获取数据。</p>
<h2 id="public"><a href="#public" class="headerlink" title="public"></a>public</h2><p><strong>Cache-Control: public</strong><br>客户端和缓存服务器都可以缓存。</p>
<h1 id="private"><a href="#private" class="headerlink" title="private"></a>private</h1><p><strong>Cache-Control: private</strong><br>只有客户端可以缓存数据,缓存服务器(或者是其他的媒介)不可以缓存。</p>
<h1 id="Pragma-http1-0"><a href="#Pragma-http1-0" class="headerlink" title="Pragma(http1.0)"></a>Pragma(http1.0)</h1><p><strong>Pragma: no-cache</strong><br>这个表示不使用缓存,直接发请求给服务器端。<br>Pragma是http1.0的产物在一些服务器中为了兼容性还保留了这个字段<br>这个字段大于Cache-Control:Pragma的优先级是高于Cache-Control的 Pragma&gt;Cache-Control<br>在请求头里面我们如果设置了Cache-Control最好是removeHeader掉Pragma这个字段</p>
<blockquote>
<p><a href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Caching_FAQ" target="_blank" rel="noopener">https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Caching_FAQ</a><br><a href="https://imweb.io/topic/5795dcb6fb312541492eda8c" target="_blank" rel="noopener">https://imweb.io/topic/5795dcb6fb312541492eda8c</a><br><a href="https://www.cnblogs.com/chenqf/p/6386163.html" target="_blank" rel="noopener">https://www.cnblogs.com/chenqf/p/6386163.html</a></p>
</blockquote>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2019/11/12/2019-11-12-Http%E8%AF%B7%E6%B1%82%E5%A4%B4Cache-Control%E6%9C%BA%E5%88%B6%E8%AF%A6%E8%A7%A3/" data-id="ck8cw09az0025px9k6np28bi3" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/" rel="tag">计算机网络</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-2019-11-05-什么是子网掩码和默认网关" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/11/05/2019-11-05-%E4%BB%80%E4%B9%88%E6%98%AF%E5%AD%90%E7%BD%91%E6%8E%A9%E7%A0%81%E5%92%8C%E9%BB%98%E8%AE%A4%E7%BD%91%E5%85%B3/" class="article-date">
  <time datetime="2019-11-04T16:00:00.000Z" itemprop="datePublished">2019-11-05</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/11/05/2019-11-05-%E4%BB%80%E4%B9%88%E6%98%AF%E5%AD%90%E7%BD%91%E6%8E%A9%E7%A0%81%E5%92%8C%E9%BB%98%E8%AE%A4%E7%BD%91%E5%85%B3/">什么是子网掩码和默认网关</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="子网掩码"><a href="#子网掩码" class="headerlink" title="子网掩码"></a>子网掩码</h1><p>当我们在配置计算机的网络时,我们需要打开计算机的网络设置界面,如下:</p>
<p><img src="/img/in-post/2005113194521734.jpg" alt=""></p>
<p>在界面中观察到我们需要设置一个叫子网掩码的东西,哪这个东西具体是干什么用的？<br>互联网中要想两个计算机通讯我们需要先确认它们的IP地址是在同一个网段的,而确认两台计算的IP地址的方式就是用子网掩码分别对IP地址做AND运算得出的结果相同则说明它们是在同一个网段上,这个时候可以直接进行通讯</p>
<p><img src="/img/in-post/2005113194521797.jpg" alt=""></p>
<p>所以子网掩码的作用就是用来判断任意的两台计算机的IP地址是否属于同一个网段的。</p>
<h1 id="网关"><a href="#网关" class="headerlink" title="网关"></a>网关</h1><p>A计算机192.168.2.0,B计算机192.168.1.0,显然这个两台计算机是无法通讯的因为通过子网掩码计算得出他们不属于同一个网段。哪怎样将计算机A的包发给计算机B呢？<br>这个时候就需要通过网关。计算机A先将数据包发送给网关(这个网关必须得在A计算机的网段中192.168.2.X)然后再转发给计算机B。<br>网关的IP地址需要具有路由功能。</p>
<h2 id="默认网关"><a href="#默认网关" class="headerlink" title="默认网关"></a>默认网关</h2><p>一台主机可能有多个网关。默认网关就是当我们指定的网关找不到的时候就把数据发给默认网关处理。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2019/11/05/2019-11-05-%E4%BB%80%E4%B9%88%E6%98%AF%E5%AD%90%E7%BD%91%E6%8E%A9%E7%A0%81%E5%92%8C%E9%BB%98%E8%AE%A4%E7%BD%91%E5%85%B3/" data-id="ck8cw09az0023px9kh1uk0vft" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/" rel="tag">计算机网络</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-2019-11-04-计算机中IP地址是怎样分配的" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/11/04/2019-11-04-%E8%AE%A1%E7%AE%97%E6%9C%BA%E4%B8%ADIP%E5%9C%B0%E5%9D%80%E6%98%AF%E6%80%8E%E6%A0%B7%E5%88%86%E9%85%8D%E7%9A%84/" class="article-date">
  <time datetime="2019-11-03T16:00:00.000Z" itemprop="datePublished">2019-11-04</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/11/04/2019-11-04-%E8%AE%A1%E7%AE%97%E6%9C%BA%E4%B8%ADIP%E5%9C%B0%E5%9D%80%E6%98%AF%E6%80%8E%E6%A0%B7%E5%88%86%E9%85%8D%E7%9A%84/">计算机中IP地址是怎样分配的</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="DHCP协议"><a href="#DHCP协议" class="headerlink" title="DHCP协议"></a>DHCP协议</h2><p>DHCP协议也叫动态主机配置协议这个协议主要是用来给计算机动态的分配IP地址。以前我们需要手动设置IP地址这样很不好管理所以它主要是解决计算机动态分配网络IP地址的问题。当计算机需要联网的时候发送一个请求给DHCP服务器要求分配一个IP,用完之后还回去(服务器IP地址是固定的)</p>
<h2 id="DHCP的工作过程"><a href="#DHCP的工作过程" class="headerlink" title="DHCP的工作过程"></a>DHCP的工作过程</h2><p><img src="/img/in-post/20160321233138127" alt=""></p>
<p>如上图所示当我们的计算机加入网络的时候,刚开始是没有IP地址的,只知道自己的MAC地址这个时候它需要发送一个DHCP Discover包给DHCP服务器。<br>当前机器使用IP地址为0.0.0.0发送一个广播包,目的IP地址为255.255.255.255包里面封装了BOOTP,UDP,IP以及自己的MAC地址</p>
<p><img src="/img/in-post/395b304f49559034af34c882bd86f11f.jpg" alt=""></p>
<p>DHCP Server接收到Discover包后,通过发送DHCP Offer包给Client应答,这个时候客户端还没有IP地址</p>
<p><img src="/img/in-post/54ffefbe4f493f0f4a39f45504bd5086.jpg" alt=""></p>
<p>DHCP Offer的内容如上图</p>
<p>客户端接收到了DHCP Offer的数据包之后,然后向网络发送一个DHCP Request数据包告诉所有的DHCP Server它将接收哪一台服务器提供的IP地址,并让其他的DHCP Server(有些时候可能有多个DHCP Server)撤销掉他们分配的IP地址以便提供给其他的请求者。<br>但是现在还没有得到DHCP Server的确认,客户端仍然还是用0.0.0.0的IP,255.255.255.255为目标IP,在BOOTP里面已经附带了客户端接受了哪个DHCP Server分配的地址了。<br>DHCP Server接收到了客户端的 DHCP Request后，会返回给客户端一个DHCP ACK消息包表示已经接受客户机的选择并将IP地址的合法租用期以及其他配置信息再发送给客户端，最后自己广播一下让大家知道。<br>至此客户端终于确认了自己的IP地址现在可以上网了。</p>
<h1 id="IP地址的续租"><a href="#IP地址的续租" class="headerlink" title="IP地址的续租"></a>IP地址的续租</h1><p>当客户端有了IP地址这个IP地址它只是租的,如果客户端不续租的话IP地址将会被收回,所以在一定的时候需要向DHCP Server发送DHCP Request数据包,服务端接收到数据包后发送DHCP ACK包作出回应然后根据包中提供的新的租期信息更新自己的TCP/IP参数等一些配置。这样当前IP又可以继续使用了。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2019/11/04/2019-11-04-%E8%AE%A1%E7%AE%97%E6%9C%BA%E4%B8%ADIP%E5%9C%B0%E5%9D%80%E6%98%AF%E6%80%8E%E6%A0%B7%E5%88%86%E9%85%8D%E7%9A%84/" data-id="ck8cw09ay0020px9k80h2cfvd" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/" rel="tag">计算机网络</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-2019-11-01-10月份的个人总结" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/11/01/2019-11-01-10%E6%9C%88%E4%BB%BD%E7%9A%84%E4%B8%AA%E4%BA%BA%E6%80%BB%E7%BB%93/" class="article-date">
  <time datetime="2019-10-31T16:00:00.000Z" itemprop="datePublished">2019-11-01</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/11/01/2019-11-01-10%E6%9C%88%E4%BB%BD%E7%9A%84%E4%B8%AA%E4%BA%BA%E6%80%BB%E7%BB%93/">10月份的个人总结</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>过去的十月份是一个好的开始和改变,自己开始学着制定每个月的月计划了。不在把精力浪费在一些垃圾的事情上,希望自己能够一直执行下去。</p>
<h1 id="关于FastEc项目"><a href="#关于FastEc项目" class="headerlink" title="关于FastEc项目"></a>关于FastEc项目</h1><p>过去的10月做的最重要的事情就是将慕课网上买的课程《Android通用框架设计与完整电商APP开发》算是基本完成了。总体而言对自己的帮助还是比较大的,知道了怎样将代码设计的更加合理编写的更加完美，同时也知道了一个电商APP的整个结构和流程。接下来最重要的事情就是弄懂APP中不懂的内容以及设计的合理型,最终可以将公司的项目再次改造一下或者自己按照这个设计方式写一个wanandroid项目。</p>
<h1 id="关于Learn-English"><a href="#关于Learn-English" class="headerlink" title="关于Learn English"></a>关于Learn English</h1><p>10月份也算是正式开始学英语了,在淘宝上购买了许岑老师的《看电影学英语》非常好。学习的第一部电影选择了《阿甘正传》现在学到了影片的20分钟左右,计划11月份能够学完吧。</p>
<h1 id="关于吉他"><a href="#关于吉他" class="headerlink" title="关于吉他"></a>关于吉他</h1><p>10月30号在网上买的吉他已经收到了,当晚就开始学习了许岑老师的吉他课程。练习基本功。现在开始学习第一首练习曲了,吉他的热情现在还没有退去希望自己能够坚持下来。</p>
<h1 id="关于11月的计划"><a href="#关于11月的计划" class="headerlink" title="关于11月的计划"></a>关于11月的计划</h1><p>11月份一个较为重要的计划就是开始学习计算机网络了《图解HTTP》,《趣谈计算机网络》。<br>另外看电影学英语以及谈吉他。<br>还有继续学习Android知识这个也非常重要。弄懂FastEc中的设计和不懂的内容。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2019/11/01/2019-11-01-10%E6%9C%88%E4%BB%BD%E7%9A%84%E4%B8%AA%E4%BA%BA%E6%80%BB%E7%BB%93/" data-id="ck8cw09ax001ypx9k9hah4x0f" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E4%B8%AA%E4%BA%BA%E6%80%BB%E7%BB%93/" rel="tag">个人总结</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-2019-10-29-网络基础理解" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/10/29/2019-10-29-%E7%BD%91%E7%BB%9C%E5%9F%BA%E7%A1%80%E7%90%86%E8%A7%A3/" class="article-date">
  <time datetime="2019-10-28T16:00:00.000Z" itemprop="datePublished">2019-10-29</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/10/29/2019-10-29-%E7%BD%91%E7%BB%9C%E5%9F%BA%E7%A1%80%E7%90%86%E8%A7%A3/">网络基础理解</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>计算机网络作为计算机非常基础也是非常难以理解的知识,对于我们理解计算机网络操作是非常有必要的。计算机网络的学习维持一个月，这是计算机网络的第一篇博客。</p>
<h1 id="网络请求过程"><a href="#网络请求过程" class="headerlink" title="网络请求过程"></a>网络请求过程</h1><ul>
<li><p>当我们从浏览器输入”<a href="http://www.baidu.com&quot;发生了什么？首先我们需要通过DNS解析器将我们的“www.baidu.com”的域名解析成计算机可以识别的内容“220.181.38.150”继续成了我们的IP地址,这个就是我们的门牌号一样。">www.baidu.com&quot;发生了什么？首先我们需要通过DNS解析器将我们的“www.baidu.com”的域名解析成计算机可以识别的内容“220.181.38.150”继续成了我们的IP地址,这个就是我们的门牌号一样。</a></p>
</li>
<li><p>知道了我们的目标IP地址这个时候就可以通过HTTP在我们的应用层封装我们的请求。</p>
<p> <img src="/img/in-post/d8a65ca347ad26acc9f1de49b10320c6.png" alt=""></p>
</li>
<li><p>接下来通过socket将应用层的包交给下一步传输层处理,在这里通过TCP协议封装我们浏览器的监听接口以及电商应用的接口。</p>
<p><img src="/img/in-post/53c753a7d49c9dfe3cfeb26497e47eee.png" alt=""></p>
</li>
<li><p>传输层完成后,下一步就将包发送给网络层。网络层通过IP协议会有目标IP地址和当前机器的IP  </p>
<p>   <img src="/img/in-post/459a421975b27f6187d2aa4673171f1b.png" alt=""></p>
</li>
<li><p>操作系统在启动的时候会被DHCP协议配置IP地址以及默认的网关IP地址“192.168.1.1”。<br>这个时候怎样将数据包发送给网关呢？通过ARP协议找到本地网关,将数据包从IP网络层传输给了MAC层(数据链路层),网卡再将包发送出去，这个时候就通过IP地址找到目标所在地，然后通过MAC地址将数据包具体的传给某台机器。</p>
</li>
<li><p>当目标服务器接收到我们的数据后他会回传信息告知我们他已经接收到信息了。然后服务器通过TCP层的端口号得到HTTP请求的内容交给自己的进程去处理，当一切都处理完成后服务端在发送一个HTTP请求给我们,在重复上述操作最终发送给客户端HTTP请求的内容,所以这个时候我们的浏览器才出来了页面内容。   </p>
</li>
</ul>
<h1 id="为什么有了IP地址还要有MAC地址才能接收到数据"><a href="#为什么有了IP地址还要有MAC地址才能接收到数据" class="headerlink" title="为什么有了IP地址还要有MAC地址才能接收到数据"></a>为什么有了IP地址还要有MAC地址才能接收到数据</h1><p>当我们的以太网数据包发送到目标服务器的网段时,虽然IP地址的前24位是网段后8位是主机部分但是计算机网络没有那么智能他无法知道具体哪个是目标的IP(这个时候数据包还没有目标的MAC地址,当前的MAC地址还是FF:FF:FF:FF)只能以广播的形式发送给网段中的所有机器,这些机器接收到数据包之后用自己的IP与数据包中的IP进行比对如果两者相同都作出回复向对方报告自己的MAC地址。主机的IP地址是随时都可以变化的但是MAC地址是唯一不变的。以太网规定，连入网络的所有设备，都必须具有”网卡”接口。数据包必须是从一块网卡，传送到另一块网卡。网卡的地址，就是数据包的发送地址和接收地址，这叫做MAC地址。IP地址的主要目的就是区分是否是在同一个网段。</p>
<p> <img src="/img/in-post/v2-bf1edc2a0520375df6e9f7e0f02b0c16_r.jpg" alt=""></p>
<blockquote>
<p><a href="http://www.ruanyifeng.com/blog/2012/05/internet_protocol_suite_part_i.html" target="_blank" rel="noopener">http://www.ruanyifeng.com/blog/2012/05/internet_protocol_suite_part_i.html</a><br><a href="http://blog.sciencenet.cn/blog-411071-1037673.html" target="_blank" rel="noopener">http://blog.sciencenet.cn/blog-411071-1037673.html</a></p>
</blockquote>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2019/10/29/2019-10-29-%E7%BD%91%E7%BB%9C%E5%9F%BA%E7%A1%80%E7%90%86%E8%A7%A3/" data-id="ck8cw09aw001vpx9k3fq573to" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/" rel="tag">计算机网络</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-2019-10-25-不变蠢的两个方法" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/10/25/2019-10-25-%E4%B8%8D%E5%8F%98%E8%A0%A2%E7%9A%84%E4%B8%A4%E4%B8%AA%E6%96%B9%E6%B3%95/" class="article-date">
  <time datetime="2019-10-24T16:00:00.000Z" itemprop="datePublished">2019-10-25</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/10/25/2019-10-25-%E4%B8%8D%E5%8F%98%E8%A0%A2%E7%9A%84%E4%B8%A4%E4%B8%AA%E6%96%B9%E6%B3%95/">不变蠢的两个方法</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>上篇发了朋友梁先生的遭遇。一个月前，梁先生出租屋突发火情，烧到家徒四壁，起火点是只接了一个台灯的排插，消防局给出的事故认定原因是“电气线路故障”。</p>
<p>尽管火情蹊跷，梁先生还是准备承担责任，把房屋恢复原状，并且在装修期间继续给房东支付房租，大概要花费20万元，是他几年的积蓄。</p>
<p>准备装修的过程中，一位经验丰富的工长发现，房屋电气装修有诸多不合规之处。这件事情让梁先生感到后怕，万一火灾发生在他睡觉的时候，可能得把命搭进去。</p>
<p>房屋的装修，是房东委托中介代办的。房东明确提出装修必须符合国家安全标准。但装修情况并非如此，梁先生因此要求和中介一起发起事故责任鉴定。之所以要一起发起，是如果梁先生单方请人鉴定，证据效力不高。</p>
<p>梁先生的意思是，如果鉴定机构的结论仍然将事故责任归于自己，那么他愿意支付鉴定费用，照样赔偿房东损失。遗憾的是，中介不予配合，还多次谩骂梁先生。</p>
<p>于是，梁先生选择向街道、派出所举报，去法院发起诉讼，也寻求在微博、公众号这样的自媒体曝光。</p>
<p>大概就是这么个事情，大部分人看到，都感到愤慨和可怕，有几位还因为这篇文章开始关注出租屋的电气安全，想找人检查一下。</p>
<p>当然，也有个别智者，对我提出质疑：“你不是支持绝对市场经济和自由主义的吗？这不是没有适当监管的一定程度上的市场经济、自由竞争吗？”</p>
<p>类似的质疑，我在写“奔驰女车主维权事件”的时候完整回应过，但依然无法避免永恒的抬杠：黑中介不是市场经济主体吗？你不是支持市场经济吗？你怎么不支持他呢？你们这些自由主义者不是一向警惕权力吗？怎么也报上警了呢？</p>
<p>最后这个问题就像：你们自由主义者不是说国企效率不如民企吗？怎么还坐高铁呢？怎么还去中石油呢？</p>
<p>要回应这些问题也简单：</p>
<p>我支持市场经济，黑中介是任何市场经济之下都可能存在的事物，他们通过一定程度的欺诈达成交易，不属于自愿交易的市场行为。</p>
<p>再自由的市场，一样会有恶人存在。支持市场，不是因为它完美，而是市场可以低成本、高效率解决或者改善问题。完美的世界，只存在于想象中的天国。</p>
<p>事实上，我的朋友在一切有选择的地方，都想通过协商、给中立机构付费的方式来获得公正。最后，出于无奈，他向居委会、派出所甚至法院寻求帮助，是因为在当前的现实条件下，这就是他仅有的选择。</p>
<p>这个问题不想赘述，有兴趣的可以看前面提到的文章。</p>
<p>更有意思的是名词的异化，以及由此诞生的杠精。</p>
<p>比如“自由”这个词，西方的自由派（liberal）搞了一大堆政治正确，不让说这个不让说那个，要求政府派福利，要保护环境不让穿皮草，多数诉求都是反自由的；而在中国，你要说自己是自由主义者，马上就有杠精跑过来问：“香港现在就很自由，可以当街打砸抢，港府现在就很小政府，你怎么不叫好呢？索马里无政府，弱肉强食，这不就是你们要的绝对自由主义吗？”</p>
<p>为了化解这种尴尬，人们创造了一大堆新名词，比如什么社会自由主义，古典自由主义，自由意志主义，自愿主义…总而言之，大家都想把自己定义的“自由”跟其他人口中的自由区分开来，否则没法对话。</p>
<p>如果不是有志于理论研究，一个人能不能分清这些概念，一点都不重要，事情摆在那里，就事论事就好。</p>
<p>有基本同理心的人，看到梁先生的遭遇，反应大体一致：愤慨、后怕、同情。只有那些学了几个似懂非懂的概念，脑子一团浆糊的人，还没有分寸感的人，才会扑上来抬杠：你不是自由主义者吗？报什么警呢？</p>
<p>这些人对抽象概念的执着和无力，让他们的思想失去了正常的血肉，就像本来会跑步的人，看了几本跑步指南，突然迈步动腿了，这也让我想到罗素的一句名言：人生而无知，但并不愚蠢，是教育使人愚蠢。</p>
<p>不想变蠢的办法倒也有：要么说话前把事情搞清楚；要么保留赤子之心，受灾人哪怕仅仅是陌路人，用朴素的生活经验去看，你也不会有这么下作的疑问。</p>
<p>我越来越觉得，第一种方法很难，因为个体的认知能力极为有限，你在一个领域是专家，在另一个领域可能是白痴。我们在生活中喜欢的那些人，通常是做到了第二点，他们真诚、善意，哪怕偶尔说错，也不招人反感。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2019/10/25/2019-10-25-%E4%B8%8D%E5%8F%98%E8%A0%A2%E7%9A%84%E4%B8%A4%E4%B8%AA%E6%96%B9%E6%B3%95/" data-id="ck8cw09av001tpx9kejuwenc8" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E4%BB%93%E5%A4%AE%E5%98%89%E6%8E%AA%E8%8F%9C/" rel="tag">仓央嘉措菜</a></li></ul>

    </footer>
  </div>
  
</article>


  


  <nav id="page-nav">
    
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><span class="space">&hellip;</span><a class="page-number" href="/page/5/">5</a><a class="extend next" rel="next" href="/page/2/">Next &amp;raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Android/" rel="tag">Android</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Java/" rel="tag">Java</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E4%B8%AA%E4%BA%BA%E6%80%BB%E7%BB%93/" rel="tag">个人总结</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E4%BB%93%E5%A4%AE%E5%98%89%E6%8E%AA%E8%8F%9C/" rel="tag">仓央嘉措菜</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%90%B4%E4%B8%BB%E4%BB%BB%E7%9A%84%E5%85%AC%E4%BC%97%E5%8F%B7/" rel="tag">吴主任的公众号</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%BC%96%E7%A8%8B/" rel="tag">多线程编程</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%A4%9A%E6%98%8E%E5%AE%87/" rel="tag">褚明宇</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/" rel="tag">计算机网络</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/Android/" style="font-size: 20px;">Android</a> <a href="/tags/Java/" style="font-size: 17.5px;">Java</a> <a href="/tags/%E4%B8%AA%E4%BA%BA%E6%80%BB%E7%BB%93/" style="font-size: 15px;">个人总结</a> <a href="/tags/%E4%BB%93%E5%A4%AE%E5%98%89%E6%8E%AA%E8%8F%9C/" style="font-size: 12.5px;">仓央嘉措菜</a> <a href="/tags/%E5%90%B4%E4%B8%BB%E4%BB%BB%E7%9A%84%E5%85%AC%E4%BC%97%E5%8F%B7/" style="font-size: 15px;">吴主任的公众号</a> <a href="/tags/%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%BC%96%E7%A8%8B/" style="font-size: 15px;">多线程编程</a> <a href="/tags/%E8%A4%9A%E6%98%8E%E5%AE%87/" style="font-size: 10px;">褚明宇</a> <a href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/" style="font-size: 17.5px;">计算机网络</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/01/">January 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/12/">December 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/11/">November 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/10/">October 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/09/">September 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/08/">August 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/07/">July 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/05/">May 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/04/">April 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/03/">March 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/02/">February 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/01/">January 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/12/">December 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/12/">December 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/02/">February 2017</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2020/01/06/2020-1-06-12%E6%9C%88%E4%BB%BD%E7%9A%84%E4%B8%AA%E4%BA%BA%E6%80%BB%E7%BB%93/">12月份的个人总结</a>
          </li>
        
          <li>
            <a href="/2019/12/31/2019-12-31-%E8%BD%AF%E5%BC%95%E7%94%A8%E5%92%8C%E5%BC%B1%E5%BC%95%E7%94%A8/">软引用和弱引用</a>
          </li>
        
          <li>
            <a href="/2019/12/06/2019-12-06-Android%20TextView%E6%BA%90%E4%BB%A3%E7%A0%81%E5%88%86%E6%9E%90/">Android TextView源代码分析</a>
          </li>
        
          <li>
            <a href="/2019/12/01/2019-12-01-11%E6%9C%88%E4%BB%BD%E7%9A%84%E4%B8%AA%E4%BA%BA%E6%80%BB%E7%BB%93/">11月份的个人总结</a>
          </li>
        
          <li>
            <a href="/2019/11/12/2019-11-12-Http%E8%AF%B7%E6%B1%82%E5%A4%B4Cache-Control%E6%9C%BA%E5%88%B6%E8%AF%A6%E8%A7%A3/">Http请求头Cache-Control机制详解</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2020 JoshuaYingWhatEgr<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  
<link rel="stylesheet" href="/fancybox/jquery.fancybox.css">

  
<script src="/fancybox/jquery.fancybox.pack.js"></script>




<script src="/js/script.js"></script>




  </div>
</body>
</html>